// ============================================
// TRANSLATIONS
// ============================================

const translations = {
    en: {
        baseline: "Strategic Technology Consulting",
        "hero.title": "Strategic Technology Consulting for Streaming Platforms",
        "hero.subtitle": "25+ years building and scaling OTT platforms",
        "cta.contact": "Contact Me",

        // Services
        "services.consulting.title": "Strategic Technology Consulting",
        "services.consulting.description": "Platform architecture, technology stack selection, and go-to-market strategy for streaming services",
        "services.consulting.feature1": "Technology audits and recommendations",
        "services.consulting.feature2": "OTT monetization strategy (SVOD/AVOD/FAST)",
        "services.consulting.feature3": "Cloud infrastructure optimization (AWS/GCP)",
        "services.consulting.feature4": "CDN and encoding architecture",
        "services.consulting.pricing": "From ‚Ç¨1,500/day",

        "services.cto.title": "Fractional CTO Services",
        "services.cto.description": "Part-time strategic technology leadership for media startups and scale-ups",
        "services.cto.feature1": "Ongoing strategic guidance",
        "services.cto.feature2": "Team structure and hiring strategy",
        "services.cto.feature3": "Technology roadmap and prioritization",
        "services.cto.feature4": "Investor and board reporting",
        "services.cto.pricing": "Custom retainer",

        "services.placement.title": "Executive Placement",
        "services.placement.description": "Identify and place top technology leaders (CTO, VP Engineering, Head of Product)",
        "services.placement.feature1": "Proven track record in executive recruitment",
        "services.placement.feature2": "Deep network in streaming/media tech",
        "services.placement.feature3": "Cultural fit assessment",
        "services.placement.feature4": "Compensation benchmarking",
        "services.placement.pricing": "‚Ç¨15-20K per placement",

        // Social Proof
        "socialProof.label": "Experience includes",
        "socialProof.partnerships": "Partnerships with",

        // Expertise
        "expertise.title": "Core Expertise",
        "expertise.item1": "OTT Platforms (VOD/SVOD/AVOD/FAST)",
        "expertise.item2": "Video Technology (Encoding, DRM, CDN)",
        "expertise.item3": "Cloud Infrastructure (AWS, GCP)",
        "expertise.item4": "Team Scaling",
        "expertise.item5": "International Expansion",
        "expertise.item6": "P&L Management",
        "expertise.item7": "Fundraising",

        // Content
        "content.title": "Thought Leadership",
        "content.newsletter.title": "Streaming Radar",
        "content.newsletter.description": "Weekly insights on the streaming industry. In-depth analysis of OTT trends, platform strategies, and technology innovations. Followed by professionals from Netflix, Amazon Prime Video, Disney+, and other leading streaming services.",
        "content.newsletter.cta": "Subscribe",
        "content.podcast.title": "On va taper dedans",
        "content.podcast.description": "French podcast about Top Chef and culinary competition shows",
        "content.podcast.cta": "Listen",

        // About
        "about.title": "About Ludovic",
        "about.text": "CTO with 25+ years scaling streaming platforms globally. R&D Manager at M6 Web where he created M6 Replay (France's leading catch-up TV service), co-founded Afrostream (Y Combinator Summer 2015), scaled Majelan audio streaming platform. Expert in OTT strategy, platform architecture, and team building. Author of Streaming Radar newsletter and co-host of 'On va taper dedans' podcast.",

        // Contact
        "contact.title": "Ready to discuss your project?"
    },

    fr: {
        baseline: "Conseil Strat√©gique en Technologies",
        "hero.title": "Conseil Strat√©gique en Technologies pour Plateformes de Streaming",
        "hero.subtitle": "25+ ans d'exp√©rience dans la cr√©ation et le scaling de plateformes OTT",
        "cta.contact": "Me Contacter",

        // Services
        "services.consulting.title": "Conseil Strat√©gique en Technologies",
        "services.consulting.description": "Architecture de plateforme, s√©lection de stack technologique et strat√©gie go-to-market pour services de streaming",
        "services.consulting.feature1": "Audits technologiques et recommandations",
        "services.consulting.feature2": "Strat√©gie de mon√©tisation OTT (SVOD/AVOD/FAST)",
        "services.consulting.feature3": "Optimisation infrastructure cloud (AWS/GCP)",
        "services.consulting.feature4": "Architecture CDN et encodage",
        "services.consulting.pricing": "√Ä partir de 1 500‚Ç¨/jour",

        "services.cto.title": "Services de CTO √† Temps Partiel",
        "services.cto.description": "Leadership technologique strat√©gique √† temps partiel pour startups et scale-ups m√©dia",
        "services.cto.feature1": "Accompagnement strat√©gique continu",
        "services.cto.feature2": "Structure d'√©quipe et strat√©gie de recrutement",
        "services.cto.feature3": "Roadmap technologique et priorisation",
        "services.cto.feature4": "Reporting investisseurs et conseil d'administration",
        "services.cto.pricing": "Forfait sur mesure",

        "services.placement.title": "Recrutement de Dirigeants",
        "services.placement.description": "Identifier et placer les meilleurs leaders technologiques (CTO, VP Engineering, Head of Product)",
        "services.placement.feature1": "Historique prouv√© en recrutement de dirigeants",
        "services.placement.feature2": "R√©seau profond dans les technologies streaming/m√©dia",
        "services.placement.feature3": "√âvaluation de l'ad√©quation culturelle",
        "services.placement.feature4": "Benchmarking de r√©mun√©ration",
        "services.placement.pricing": "15-20K‚Ç¨ par placement",

        // Social Proof
        "socialProof.label": "Exp√©rience comprenant",
        "socialProof.partnerships": "Partenariats avec",

        // Expertise
        "expertise.title": "Expertises Cl√©s",
        "expertise.item1": "Plateformes OTT (VOD/SVOD/AVOD/FAST)",
        "expertise.item2": "Technologies Vid√©o (Encodage, DRM, CDN)",
        "expertise.item3": "Infrastructure Cloud (AWS, GCP)",
        "expertise.item4": "Scaling d'√âquipes",
        "expertise.item5": "Expansion Internationale",
        "expertise.item6": "Gestion P&L",
        "expertise.item7": "Lev√©es de Fonds",

        // Content
        "content.title": "Leadership d'Opinion",
        "content.newsletter.title": "Streaming Radar",
        "content.newsletter.description": "Analyses hebdomadaires de l'industrie du streaming. Analyse approfondie des tendances OTT, strat√©gies de plateformes et innovations technologiques. Suivi par des professionnels de Netflix, Amazon Prime Video, Disney+ et autres grands services de streaming.",
        "content.newsletter.cta": "S'abonner",
        "content.podcast.title": "On va taper dedans",
        "content.podcast.description": "Podcast fran√ßais sur Top Chef et les √©missions culinaires de comp√©tition",
        "content.podcast.cta": "√âcouter",

        // About
        "about.title": "√Ä Propos de Ludovic",
        "about.text": "CTO avec 25+ ans d'exp√©rience dans le scaling de plateformes de streaming √† l'√©chelle mondiale. R&D Manager chez M6 Web o√π il a cr√©√© M6 Replay (service de catch-up TV leader en France), co-fondateur d'Afrostream (Y Combinator Summer 2015), a fait cro√Ætre la plateforme audio Majelan. Expert en strat√©gie OTT, architecture de plateforme et constitution d'√©quipes. Auteur de la newsletter Streaming Radar et co-animateur du podcast 'On va taper dedans'.",

        // Contact
        "contact.title": "Pr√™t √† discuter de votre projet ?"
    },

    zh: {
        baseline: "ÊàòÁï•ÊäÄÊúØÂí®ËØ¢",
        "hero.title": "ÊµÅÂ™í‰ΩìÂπ≥Âè∞ÊàòÁï•ÊäÄÊúØÂí®ËØ¢",
        "hero.subtitle": "25Âπ¥‰ª•‰∏äOTTÂπ≥Âè∞Êê≠Âª∫‰∏éÊâ©Â±ïÁªèÈ™å",
        "cta.contact": "ËÅîÁ≥ªÊàë",

        // Services
        "services.consulting.title": "ÊàòÁï•ÊäÄÊúØÂí®ËØ¢",
        "services.consulting.description": "ÊµÅÂ™í‰ΩìÊúçÂä°ÁöÑÂπ≥Âè∞Êû∂ÊûÑ„ÄÅÊäÄÊúØÊ†àÈÄâÊã©ÂíåÂ∏ÇÂú∫Êé®ËøõÁ≠ñÁï•",
        "services.consulting.feature1": "ÊäÄÊúØÂÆ°ËÆ°‰∏éÂª∫ËÆÆ",
        "services.consulting.feature2": "OTTÂèòÁé∞Á≠ñÁï•ÔºàSVOD/AVOD/FASTÔºâ",
        "services.consulting.feature3": "‰∫ëÂü∫Á°ÄËÆæÊñΩ‰ºòÂåñÔºàAWS/GCPÔºâ",
        "services.consulting.feature4": "CDNÂíåÁºñÁ†ÅÊû∂ÊûÑ",
        "services.consulting.pricing": "ÊØèÊó•1500Ê¨ßÂÖÉËµ∑",

        "services.cto.title": "ÂÖºËÅåCTOÊúçÂä°",
        "services.cto.description": "‰∏∫Â™í‰ΩìÂàùÂàõÂÖ¨Âè∏ÂíåÊàêÈïøÂûã‰ºÅ‰∏öÊèê‰æõÂÖºËÅåÊàòÁï•ÊäÄÊúØÈ¢ÜÂØºÊúçÂä°",
        "services.cto.feature1": "ÊåÅÁª≠ÊàòÁï•ÊåáÂØº",
        "services.cto.feature2": "Âõ¢ÈòüÁªìÊûÑ‰∏éÊãõËÅòÁ≠ñÁï•",
        "services.cto.feature3": "ÊäÄÊúØË∑ØÁ∫øÂõæ‰∏é‰ºòÂÖàÁ∫ßËßÑÂàí",
        "services.cto.feature4": "ÊäïËµÑ‰∫∫‰∏éËë£‰∫ã‰ºöÊä•Âëä",
        "services.cto.pricing": "ÂÆöÂà∂ÊúçÂä°Ë¥π",

        "services.placement.title": "È´òÁÆ°ÊãõËÅò",
        "services.placement.description": "ËØÜÂà´Âπ∂ÂÆâÁΩÆÈ°∂Â∞ñÊäÄÊúØÈ¢ÜÂØºËÄÖÔºàCTO„ÄÅÂ∑•Á®ãÂâØÊÄªË£Å„ÄÅ‰∫ßÂìÅË¥üË¥£‰∫∫Ôºâ",
        "services.placement.feature1": "È´òÁÆ°ÊãõËÅòÈ¢ÜÂüüÁªèÈ™å‰∏∞ÂØå",
        "services.placement.feature2": "ÊµÅÂ™í‰Ωì/Â™í‰ΩìÊäÄÊúØÈ¢ÜÂüüÊ∑±Âéö‰∫∫ËÑâ",
        "services.placement.feature3": "ÊñáÂåñÂ•ëÂêàÂ∫¶ËØÑ‰º∞",
        "services.placement.feature4": "Ëñ™ÈÖ¨Âü∫ÂáÜÂàÜÊûê",
        "services.placement.pricing": "ÊØèÊ¨°ÂÆâÁΩÆ15-20KÊ¨ßÂÖÉ",

        // Social Proof
        "socialProof.label": "Â∑•‰ΩúÁªèÂéÜÂåÖÊã¨",
        "socialProof.partnerships": "Âêà‰Ωú‰ºô‰º¥",

        // Expertise
        "expertise.title": "Ê†∏ÂøÉ‰∏ìÈïø",
        "expertise.item1": "OTTÂπ≥Âè∞ÔºàVOD/SVOD/AVOD/FASTÔºâ",
        "expertise.item2": "ËßÜÈ¢ëÊäÄÊúØÔºàÁºñÁ†Å„ÄÅDRM„ÄÅCDNÔºâ",
        "expertise.item3": "‰∫ëÂü∫Á°ÄËÆæÊñΩÔºàAWS„ÄÅGCPÔºâ",
        "expertise.item4": "Âõ¢ÈòüÊâ©Â±ï",
        "expertise.item5": "ÂõΩÈôÖÊâ©Âº†",
        "expertise.item6": "ÊçüÁõäÁÆ°ÁêÜ",
        "expertise.item7": "ËûçËµÑ",

        // Content
        "content.title": "ÊÄùÊÉ≥È¢ÜÂØºÂäõ",
        "content.newsletter.title": "Streaming Radar",
        "content.newsletter.description": "ÊØèÂë®ÊµÅÂ™í‰ΩìË°å‰∏öÊ∑±Â∫¶Ê¥ûÂØü„ÄÇÊ∑±ÂÖ•ÂàÜÊûêOTTË∂ãÂäø„ÄÅÂπ≥Âè∞Á≠ñÁï•ÂíåÊäÄÊúØÂàõÊñ∞„ÄÇNetflix„ÄÅAmazon Prime Video„ÄÅDisney+Á≠âÈ¢ÜÂÖàÊµÅÂ™í‰ΩìÊúçÂä°ÁöÑ‰∏ì‰∏ö‰∫∫Â£´ÂÖ≥Ê≥®„ÄÇ",
        "content.newsletter.cta": "ËÆ¢ÈòÖ",
        "content.podcast.title": "On va taper dedans",
        "content.podcast.description": "ÂÖ≥‰∫éTop ChefÂíåÁÉπÈ•™Á´ûËµõËäÇÁõÆÁöÑÊ≥ïËØ≠Êí≠ÂÆ¢",
        "content.podcast.cta": "Êî∂Âê¨",

        // About
        "about.title": "ÂÖ≥‰∫éLudovic",
        "about.text": "Êã•Êúâ25Âπ¥‰ª•‰∏äÂÖ®ÁêÉÊµÅÂ™í‰ΩìÂπ≥Âè∞Êâ©Â±ïÁªèÈ™åÁöÑCTO„ÄÇÊõæ‰ªªM6 WebÁ†îÂèëÁªèÁêÜÔºåÂàõÂª∫‰∫ÜM6 ReplayÔºàÊ≥ïÂõΩÈ¢ÜÂÖàÁöÑÁîµËßÜÂõûÁúãÊúçÂä°ÔºâÔºåAfrostreamËÅîÂêàÂàõÂßã‰∫∫ÔºàY Combinator 2015Â§èÂ≠£Áè≠ÔºâÔºåÊâ©Â±ï‰∫ÜMajelanÈü≥È¢ëÊµÅÂ™í‰ΩìÂπ≥Âè∞„ÄÇÂú®OTTÊàòÁï•„ÄÅÂπ≥Âè∞Êû∂ÊûÑÂíåÂõ¢ÈòüÂª∫ËÆæÊñπÈù¢Êã•Êúâ‰∏ì‰∏öÁü•ËØÜ„ÄÇStreaming RadarÊó∂‰∫ãÈÄöËÆØ‰ΩúËÄÖÔºå'On va taper dedans'Êí≠ÂÆ¢ËÅîÂêà‰∏ªÊåÅ‰∫∫„ÄÇ",

        // Contact
        "contact.title": "ÂáÜÂ§áËÆ®ËÆ∫ÊÇ®ÁöÑÈ°πÁõÆ‰∫ÜÂêóÔºü"
    }
};

// ============================================
// LANGUAGE SWITCHING
// ============================================

class LanguageSwitcher {
    constructor() {
        this.currentLang = localStorage.getItem('preferred-language') || 'en';
        this.init();
    }

    init() {
        // Set initial language
        this.setLanguage(this.currentLang);

        // Add event listeners to language buttons
        document.querySelectorAll('.lang-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const lang = e.target.dataset.lang;
                this.setLanguage(lang);
            });
        });
    }

    setLanguage(lang) {
        // Validate language
        if (!translations[lang]) {
            console.error(`Language ${lang} not found`);
            return;
        }

        this.currentLang = lang;

        // Save to localStorage
        localStorage.setItem('preferred-language', lang);

        // Update HTML lang attribute
        document.documentElement.lang = lang;

        // Update active button
        document.querySelectorAll('.lang-btn').forEach(btn => {
            btn.classList.remove('active');
            if (btn.dataset.lang === lang) {
                btn.classList.add('active');
            }
        });

        // Update all text with data-i18n attribute
        this.updatePageText();
    }

    updatePageText() {
        const elements = document.querySelectorAll('[data-i18n]');

        elements.forEach(element => {
            const key = element.dataset.i18n;
            const translation = translations[this.currentLang][key];

            if (translation) {
                // Check if element is an input/textarea
                if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                    element.placeholder = translation;
                } else {
                    element.textContent = translation;
                }
            } else {
                console.warn(`Translation not found for key: ${key} in language: ${this.currentLang}`);
            }
        });
    }
}

// ============================================
// SCROLL ANIMATIONS
// ============================================

class ScrollAnimations {
    constructor() {
        this.observer = null;
        this.init();
    }

    init() {
        // Create Intersection Observer
        const options = {
            root: null,
            rootMargin: '0px',
            threshold: 0.1
        };

        this.observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, options);

        // Observe all elements with fade-in class
        this.observeElements();
    }

    observeElements() {
        const elements = document.querySelectorAll('.fade-in');
        elements.forEach(element => {
            this.observer.observe(element);
        });
    }
}

// ============================================
// SMOOTH SCROLL
// ============================================

class SmoothScroll {
    constructor() {
        this.init();
    }

    init() {
        // Add smooth scroll to all anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', (e) => {
                const href = anchor.getAttribute('href');

                // Skip if href is just "#"
                if (href === '#' || href === '#privacy' || href === '#terms') {
                    return;
                }

                e.preventDefault();
                const target = document.querySelector(href);

                if (target) {
                    const headerOffset = 80;
                    const elementPosition = target.getBoundingClientRect().top;
                    const offsetPosition = elementPosition + window.pageYOffset - headerOffset;

                    window.scrollTo({
                        top: offsetPosition,
                        behavior: 'smooth'
                    });
                }
            });
        });
    }
}

// ============================================
// IMAGE LAZY LOADING FALLBACK
// ============================================

class LazyLoadImages {
    constructor() {
        this.init();
    }

    init() {
        // Check if browser supports native lazy loading
        if ('loading' in HTMLImageElement.prototype) {
            // Browser supports native lazy loading
            return;
        }

        // Fallback for browsers that don't support native lazy loading
        const images = document.querySelectorAll('img[loading="lazy"]');

        const imageObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const img = entry.target;
                    img.src = img.dataset.src || img.src;
                    img.classList.add('loaded');
                    imageObserver.unobserve(img);
                }
            });
        });

        images.forEach(img => imageObserver.observe(img));
    }
}

// ============================================
// HEADER SCROLL EFFECT
// ============================================

class HeaderScroll {
    constructor() {
        this.header = document.querySelector('.header');
        this.init();
    }

    init() {
        let lastScroll = 0;

        window.addEventListener('scroll', () => {
            const currentScroll = window.pageYOffset;

            // Add shadow when scrolled
            if (currentScroll > 50) {
                this.header.style.boxShadow = '0 2px 10px rgba(0, 0, 0, 0.1)';
            } else {
                this.header.style.boxShadow = 'none';
            }

            lastScroll = currentScroll;
        });
    }
}

// ============================================
// INITIALIZE APP
// ============================================

document.addEventListener('DOMContentLoaded', () => {
    // Initialize all modules
    new LanguageSwitcher();
    new ScrollAnimations();
    new SmoothScroll();
    new LazyLoadImages();
    new HeaderScroll();

    // Log initialization
    console.log('üöÄ Ludovic Bostral Consulting Website Initialized');
    console.log('üìß Contact: lbostral@gmail.com');
    console.log('üîó LinkedIn: https://linkedin.com/in/ludovicbostral');
    console.log('üì∞ Newsletter: https://streamingradar.substack.com');
});

// ============================================
// PERFORMANCE MONITORING (Development Only)
// ============================================

if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
    window.addEventListener('load', () => {
        const perfData = window.performance.timing;
        const pageLoadTime = perfData.loadEventEnd - perfData.navigationStart;
        console.log(`‚è±Ô∏è Page Load Time: ${pageLoadTime}ms`);
    });
}

// ============================================
// ANALYTICS PLACEHOLDER
// ============================================

// Add your analytics code here (Google Analytics, Plausible, etc.)
// Example:
// window.dataLayer = window.dataLayer || [];
// function gtag(){dataLayer.push(arguments);}
// gtag('js', new Date());
// gtag('config', 'GA_MEASUREMENT_ID');
